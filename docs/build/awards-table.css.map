{
  "version": 3,
  "file": "awards-table.css",
  "sources": [
    "AppAwardsTable.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import jpegFileName from './lib/jpeg-file-name.js'; \n  import FlexCellConstants from './lib/flex-cell-constants.js';\n  import FlexRowConstants from './lib/flex-row-constants.js';\n  import axios from 'axios'; \n  import IntersectionObserver from 'svelte-intersection-observer';\n  axios.defaults.headers.common['Accept'] = 'application/json';\n  axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n  axios.defaults.headers.common['Content-Type'] = 'application/json';\n  export let id = null;\n  export let table = null;\n  export let columns = 0;\n\n  let colspanBuffer = 1;\n\n  const reqUrl = `https://api-auszeichnungen.fmh.de/graphql`;\n  let element;\n \n  const query = `\n    {\n      flex_table(id: ${id}) {\n        title\n        subtitle\n        explanation\n        footer\n        data_annotation\n        table_annotation\n        flex_rows(search: {active: true}, pagination: {pageSize: 100}, order: {position: ASC}) {\n          docs {\n            active\n            id\n            row_type\n            label\n            position\n            flex_cells(search: {active: true}, pagination: {pageSize: 100}, order: {position: ASC}) {\n              docs {\n                id\n                active\n                col_type\n                col_width\n                align_type\n                colspan\n                url\n                content\n              }\n            }\n          }\n        }\n        laureates(search: {active: true}, order: {degree_type: ASC, position: ASC}) {\n          docs {\n            id\n            image_file_name\n            commendation {\n              award {\n               name\n              }\n              volume {\n                year \n              }\n            }\n            bank {\n              name\n            }\n          }\n        }\n      }\n    } \n  `;\n\n  function rank(laureate) {\n    if (laureate.degree_type) {\n      return `${laureate.degree_type}. Platz`;\n    }\n    return '';\n  }\n\n  function imgAlt(laureate) {\n    return `${laureate?.bank?.name} ${laureate?.commendation?.award?.name}\n    ${laureate?.commendation?.volume?.year}`;\n  }\n\n  function hasImage(laureate) {\n    return laureate?.image_file_name;\n  }\n\n  function imgSrc (laureate, size = 'big') { \n    const imgFileName = jpegFileName(laureate.image_file_name);\n    return `https://auszeichnungen.fmh.de/laureates/images/${laureate.id}/${size}/${laureate.file_hash}!${imgFileName}`;\n  }\n\n  function fetchData(_ev) {\n    if (table) return true;\n    axios({method: 'post', url: reqUrl, data: {query}})\n      .then((res) => {\n        table = res.data.data.flex_table;\n        columns = 0 || table?.flex_rows?.docs?.[0].flex_cells?.docs?.length; \n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  }\n\n  function rowClasses(row) {\n    const classes = [];\n    const block = 'awards-table';\n    const element = `${block}__tr`;\n    const rowVal = FlexRowConstants.getVal('RowTypes', row.row_type);\n    classes.push(rowVal);\n    return classes.map(c =>  `${element}--${c}`).join(' ');\n  }\n  \n  function cellClasses(cell) {\n    const classes = [];\n    const block = 'awards-table';\n    const element = `${block}__td`;\n    const cellVal = FlexCellConstants.getVal('ColTypes', cell.col_type);\n    classes.push(cellVal);\n    const alignVal = 'align-' + FlexCellConstants.getVal('AlignTypes', cell.align_type);\n    classes.push(alignVal);\n    return classes.map(c =>  `${element}--${c}`).join(' ');\n  }\n\n  function colspan(cell) {\n    if (cell.colspan > 1) {\n      colspanBuffer = cell.colspan;\n      return cell.colspan; \n    }\n    if (colspanBuffer > 1) {\n      colspanBuffer -= 1;\n      return cell.colspan = 0;\n    }\n    return cell.colspan = 1;\n  }\n\n  function hiddenClass(cell) {\n    return cell.colspan === 0 ? 'awards-table__td--hidden' : '';\n  }\n\n</script>\n\n\n  <IntersectionObserver {element} on:intersect={fetchData}>\n    <div bind:this={element} class=\"awards-table\">\n      {#if table} \n        <div class=\"awards-table__table-container\"> \n          <table class=\"awards-table__table\">\n            <caption class=\"awards-table__caption\">\n              <h2 class=\"awards-table__title\">{table.title}</h2>\n              {#if table.subtitle} \n                <p class=\"awards-table__subtitle\">{table.subtitle}</p>\n              {/if}\n            </caption>\n            {#each table?.flex_rows?.docs as row}\n              <tr class=\"awards-table__tr {rowClasses(row)}\">\n                {#each row?.flex_cells?.docs as cell}\n                  <td colspan={colspan(cell)} class=\"awards-table__td {cellClasses(cell)}\n                    {hiddenClass(cell)}\">\n                    {@html cell.content}\n                  </td>\n                {/each}\n              </tr>\n            {/each}\n            <tfoot class=\"awards-table__tfoot\">\n              {#if table.annotation }\n                <tr class=\"awards-table__tr\">\n                  <td class=\"awards-table__td\"\n                    colspan=\"{columns}\">\n                    <p>{@html table.annotation}</p>\n                  </td>\n                </tr>\n              {/if}\n              {#if table.data_annotation }\n                <tr class=\"awards-table__tr\">\n                  <td class=\"awards-table__td awards-table__td--footnote\"\n                    colspan=\"{columns}\">\n                    <p>{@html table.data_annotation}</p>\n                  </td>\n                </tr>\n              {/if}\n              {#if table.table_annotation }\n                <tr class=\"awards-table__tr\">\n                  <td class=\"awards-table__td awards-table__td--footnote\"\n                    colspan=\"{columns}\">\n                    <p>{@html table.table_annotation}</p>\n                  </td>\n                </tr>\n              {/if}\n              {#if table.footer }\n                <tr class=\"awards-table__tr\">\n                  <td class=\"awards-table__td awards-table__td--footnote\"\n                    colspan=\"{columns}\">\n                    <p>{@html table.footer?.split('\\n')?.join('<br/>')}</p>\n                  </td>\n                </tr>\n              {/if}\n              <tr class=\"awards-table__tr\">\n                <td class=\"awards-table__td awards-table__td--footnote\"\n                  colspan=\"{columns}\">\n                  <p>Quelle: FMH-Finanzberatung. Alle Angaben sind\n                    urheberrechtlich gesch√ºtzt.</p>\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n        {#if table.laureates?.docs?.length}\n          <div class=\"awards-table__siegel\">\n            {#each table.laureates?.docs as laureate}\n              {#if hasImage(laureate) } \n                <figure class=\"awards-table__figure\">\n                  <img class=\"awards-table__img\"\n                    src={imgSrc(laureate)}\n                    alt={imgAlt(laureate)}\n                    loading=\"lazy\">\n                  <figcaption class=\"awards-table__figcaption\">\n                    {imgAlt(laureate)} {rank(laureate)}\n                  </figcaption>\n                </figure>\n              {/if}\n            {/each}\n          </div>\n        {/if}\n      {/if}\n    </div>\n  </IntersectionObserver>\n\n\n<style type=\"text/scss\">.awards-table {\n  display: flex;\n  justify-content: space-between; }\n  .awards-table, .awards-table * {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    box-sizing: border-box; }\n  .awards-table__table-container {\n    flex: auto 1 1; }\n  .awards-table__siegel {\n    max-width: 180px;\n    margin-top: 3rem; }\n  .awards-table__caption {\n    padding: 0.5rem; }\n  .awards-table__title, .awards-table__subtitle, .awards-table__p {\n    line-height: 1.2em;\n    font-family: Roboto, arial, helvetica, sans-serif; }\n  .awards-table__title {\n    font-size: 20px;\n    font-weight: 500; }\n  .awards-table__subtitle {\n    color: #181818;\n    font-size: 17px;\n    font-weight: 500; }\n  .awards-table__table {\n    width: 100%;\n    border-collapse: collapse; }\n  .awards-table__tr--blank td {\n    height: 1rem;\n    border-left: 0;\n    border-right: 0;\n    color: white; }\n  .awards-table__tr--label td {\n    background-color: #f3f3f3;\n    text-align: center;\n    font-weight: 500; }\n    .awards-table__tr--label td:first-child {\n      text-align: left; }\n  .awards-table__tr--data td {\n    text-align: center; }\n  .awards-table__td, .awards-table__th {\n    vertical-align: top;\n    padding: 0.5em;\n    font-family: Roboto, arial, helvetica, sans-serif;\n    font-size: 16px;\n    color: #181818;\n    font-weight: 400;\n    border-bottom: 1px solid #ddd; }\n    .awards-table__td--blank, .awards-table__th--blank {\n      border-left: 0;\n      border-right: 0;\n      height: 1rem; }\n    .awards-table__td--label, .awards-table__th--label {\n      background-color: #f3f3f3;\n      color: #0066a1;\n      text-align: center;\n      font-weight: 500; }\n      .awards-table__td--label:first-child, .awards-table__th--label:first-child {\n        text-align: left; }\n    .awards-table__td--data, .awards-table__th--data {\n      text-align: center; }\n    .awards-table__td--hidden, .awards-table__th--hidden {\n      display: none; }\n    .awards-table__td--align-left, .awards-table__th--align-left {\n      text-align: left !important; }\n    .awards-table__td--align-right, .awards-table__th--align-right {\n      text-align: right !important; }\n    .awards-table__td--align-center, .awards-table__th--align-center {\n      text-align: center !important; }\n    .awards-table__td--align-block, .awards-table__th--align-block {\n      text-align: justify !important; }\n    .awards-table__td--footnote, .awards-table__th--footnote {\n      font-size: 11px; }\n  .awards-table__img {\n    width: 100%;\n    height: auto; }\n  .awards-table__figure {\n    margin-right: 0;\n    margin-left: auto;\n    min-width: 80px;\n    max-width: 100%;\n    display: block;\n    padding: 0.25rem 0 0.25rem 0.5rem; }\n  .awards-table__figcaption {\n    overflow-x: hidden;\n    text-overflow: ellipsis;\n    font-family: Roboto, arial, helvetica, sans-serif;\n    font-size: 11px;\n    text-align: center; }\n  .awards-table__link {\n    display: block;\n    text-decoration: none; }\n    .awards-table__link:hover .awards-table__title,\n    .awards-table__link:hover .awards-table__subtitle,\n    .awards-table__link:hover .awards-table__more {\n      text-decoration: underline; }\n  .awards-table__title, .awards-table__more {\n    color: #1194db; }\n  .awards-table__title, .awards-table__subtitle {\n    display: block; }\n  .awards-table__title {\n    margin: 0.25em 0;\n    line-height: 1.3em;\n    font-weight: 500;\n    font-size: 20px;\n    letter-spacing: 0.025em; }\n  .awards-table__subtitle {\n    line-height: 1.3em;\n    margin: 0.5em 0;\n    color: #181818;\n    font-weight: 500;\n    font-size: 17px; }\n  .awards-table__p {\n    color: #181818;\n    line-height: 1.4em;\n    font-size: 16px; }\n  .awards-table__more {\n    font-weight: 500; }\n</style>\n\n"
  ],
  "names": [],
  "mappings": "AAmOwB,aAAa,8BAAC,CAAC,AACrC,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,AAAE,CAAC,AACjC,2CAAa,CAAE,4BAAa,CAAC,eAAE,CAAC,AAC9B,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,UAAU,AAAE,CAAC,AAC3B,8BAA8B,8BAAC,CAAC,AAC9B,IAAI,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,AAAE,CAAC,AACnB,qBAAqB,8BAAC,CAAC,AACrB,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,IAAI,AAAE,CAAC,AACrB,sBAAsB,8BAAC,CAAC,AACtB,OAAO,CAAE,MAAM,AAAE,CAAC,AACpB,kDAAoB,CAAE,qDAAuB,CAAE,gBAAgB,8BAAC,CAAC,AAC/D,WAAW,CAAE,KAAK,CAClB,WAAW,CAAE,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,UAAU,AAAE,CAAC,AACtD,oBAAoB,8BAAC,CAAC,AACpB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,AAAE,CAAC,AACrB,uBAAuB,8BAAC,CAAC,AACvB,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,AAAE,CAAC,AACrB,oBAAoB,8BAAC,CAAC,AACpB,KAAK,CAAE,IAAI,CACX,eAAe,CAAE,QAAQ,AAAE,CAAC,AAC9B,uCAAwB,CAAC,EAAE,eAAC,CAAC,AAC3B,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,CAAC,CACd,YAAY,CAAE,CAAC,CACf,KAAK,CAAE,KAAK,AAAE,CAAC,AACjB,uCAAwB,CAAC,EAAE,eAAC,CAAC,AAC3B,gBAAgB,CAAE,OAAO,CACzB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,AAAE,CAAC,AACnB,uCAAwB,CAAC,iBAAE,YAAY,AAAC,CAAC,AACvC,UAAU,CAAE,IAAI,AAAE,CAAC,AACvB,sCAAuB,CAAC,EAAE,eAAC,CAAC,AAC1B,UAAU,CAAE,MAAM,AAAE,CAAC,AACvB,+CAAiB,CAAE,iBAAiB,8BAAC,CAAC,AACpC,cAAc,CAAE,GAAG,CACnB,OAAO,CAAE,KAAK,CACd,WAAW,CAAE,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,UAAU,CACjD,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,GAAG,CAChB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAAE,CAAC,AAChC,sDAAwB,CAAE,wBAAwB,8BAAC,CAAC,AAClD,WAAW,CAAE,CAAC,CACd,YAAY,CAAE,CAAC,CACf,MAAM,CAAE,IAAI,AAAE,CAAC,AACjB,sDAAwB,CAAE,wBAAwB,8BAAC,CAAC,AAClD,gBAAgB,CAAE,OAAO,CACzB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,AAAE,CAAC,AACnB,sDAAwB,YAAY,CAAE,sDAAwB,YAAY,AAAC,CAAC,AAC1E,UAAU,CAAE,IAAI,AAAE,CAAC,AACvB,qDAAuB,CAAE,uBAAuB,8BAAC,CAAC,AAChD,UAAU,CAAE,MAAM,AAAE,CAAC,AACvB,uDAAyB,CAAE,yBAAyB,8BAAC,CAAC,AACpD,OAAO,CAAE,IAAI,AAAE,CAAC,AAClB,2DAA6B,CAAE,6BAA6B,8BAAC,CAAC,AAC5D,UAAU,CAAE,IAAI,CAAC,UAAU,AAAE,CAAC,AAChC,4DAA8B,CAAE,8BAA8B,8BAAC,CAAC,AAC9D,UAAU,CAAE,KAAK,CAAC,UAAU,AAAE,CAAC,AACjC,6DAA+B,CAAE,+BAA+B,8BAAC,CAAC,AAChE,UAAU,CAAE,MAAM,CAAC,UAAU,AAAE,CAAC,AAClC,4DAA8B,CAAE,8BAA8B,8BAAC,CAAC,AAC9D,UAAU,CAAE,OAAO,CAAC,UAAU,AAAE,CAAC,AACnC,yDAA2B,CAAE,2BAA2B,8BAAC,CAAC,AACxD,SAAS,CAAE,IAAI,AAAE,CAAC,AACtB,kBAAkB,8BAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAAE,CAAC,AACjB,qBAAqB,8BAAC,CAAC,AACrB,YAAY,CAAE,CAAC,CACf,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,KAAK,CACd,OAAO,CAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,AAAE,CAAC,AACtC,yBAAyB,8BAAC,CAAC,AACzB,UAAU,CAAE,MAAM,CAClB,aAAa,CAAE,QAAQ,CACvB,WAAW,CAAE,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,UAAU,CACjD,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,MAAM,AAAE,CAAC,AACvB,mBAAmB,8BAAC,CAAC,AACnB,OAAO,CAAE,KAAK,CACd,eAAe,CAAE,IAAI,AAAE,CAAC,AACxB,kCAAmB,MAAM,CAAC,mCAAoB,CAC9C,kCAAmB,MAAM,CAAC,sCAAuB,CACjD,kCAAmB,MAAM,CAAC,mBAAmB,eAAC,CAAC,AAC7C,eAAe,CAAE,SAAS,AAAE,CAAC,AACjC,kDAAoB,CAAE,mBAAmB,8BAAC,CAAC,AACzC,KAAK,CAAE,OAAO,AAAE,CAAC,AACnB,kDAAoB,CAAE,uBAAuB,8BAAC,CAAC,AAC7C,OAAO,CAAE,KAAK,AAAE,CAAC,AACnB,oBAAoB,8BAAC,CAAC,AACpB,MAAM,CAAE,MAAM,CAAC,CAAC,CAChB,WAAW,CAAE,KAAK,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,cAAc,CAAE,OAAO,AAAE,CAAC,AAC5B,uBAAuB,8BAAC,CAAC,AACvB,WAAW,CAAE,KAAK,CAClB,MAAM,CAAE,KAAK,CAAC,CAAC,CACf,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,AAAE,CAAC,AACpB,gBAAgB,8BAAC,CAAC,AAChB,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,KAAK,CAClB,SAAS,CAAE,IAAI,AAAE,CAAC,AACpB,mBAAmB,8BAAC,CAAC,AACnB,WAAW,CAAE,GAAG,AAAE,CAAC"
}